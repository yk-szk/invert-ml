(this["webpackJsonpinvert-ml"]=this["webpackJsonpinvert-ml"]||[]).push([[0],{102:function(e,t,n){},44:function(e,t,n){e.exports=n(45)},45:function(e,t,n){"use strict";n.r(t),function(e){var t=n(42),a=n(34),r=n(35),l=n(9),o=n(43),c=n(41),s=n(0),i=n.n(s),u=n(36),d=n.n(u),m=n(40),h=n(38),f=n.n(h),p=n(39),v=n.n(p);n(102);function E(e){var t=Object(s.useCallback)(e.onDrop,[]),n=Object(m.a)({onDrop:t}),a=n.getRootProps,r=n.getInputProps,l=n.isDragActive;return i.a.createElement("div",a({className:"dropzone"}),i.a.createElement("input",r()),l?i.a.createElement("p",null,"\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u304f ..."):i.a.createElement("p",null,"CSV\u30d5\u30a1\u30a4\u30eb\u3092\u30c9\u30ed\u30c3\u30d7\u3002\u3082\u3057\u304f\u306f\u30af\u30ea\u30c3\u30af\u3057\u3066\u9078\u629e\u3002"))}function b(e){return'"'+e.key+'"\u3068"'+e.value+'"\u3092\u30bb\u30c3\u30c8\u3057\u307e\u3059\u3002'}function y(e,t){return e.key===t.key&&e.value===t.value}var k={key:"ML\u30a2\u30c9\u30ec\u30b9",value:"ML\u30e1\u30f3\u30d0\u30fc"},g={key:"ML\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9(\u7de8\u96c6\u4e0d\u53ef)",value:"\u30e1\u30f3\u30d0\u30fc"},_=function(n){Object(o.a)(u,n);var s=Object(c.a)(u);function u(e){var t;return Object(a.a)(this,u),(t=s.call(this,e)).state={cols:k,preset1_disabled:!0,preset2_disabled:!1,rows:new Map([["",[""]]]),error:""},t.handleChange=t.handleChange.bind(Object(l.a)(t)),t.handleButtonClick=t.handleButtonClick.bind(Object(l.a)(t)),t}return Object(r.a)(u,[{key:"handleDrop",value:function(t){var n=this,a=t[0],r=new FileReader;r.onabort=function(){return alert("file reading was aborted")},r.onerror=function(){return alert("file reading has failed")},r.onload=function(){if(r.result instanceof ArrayBuffer){var t=r.result,a=f.a.decode(e.from(t),"windows-31j"),l=[],o=[],c=v()({delimiter:",",skip_empty_lines:!0});c.on("readable",(function(){for(var e;Boolean(e=c.read());)0===l.length?l=e:o.push(e)})),c.on("error",(function(e){n.setState({error:"CSV\u306e\u30d1\u30fc\u30b9\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002"+e.message})})),c.on("end",(function(){console.log(l);var e=n.state.cols.key,t=n.state.cols.value,a=l.findIndex((function(t){return t===e}));if(-1!==a){var r=l.findIndex((function(e){return e===t}));if(-1!==r){var c=function(e,t){var n=new Set(t.reduce((function(e,t){return e.concat(t)}),[])),a=Array.from(n).sort(),r=new Map(a.map((function(e){return[e,[]]})));return e.map((function(e,n){return t[n].map((function(t){return r.get(t).push(e)}))})),r}(o.map((function(e){return e[a]})),o.map((function(e){return e[r].split("\n").filter((function(e){return e.length>0}))})));n.setState({rows:c,error:""})}else n.setState({error:"["+t+"]\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u30d8\u30c3\u30c0\u306f\u6b21\u306e\u4e2d\u304b\u3089\u9078\u3076\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002{"+l.join(", ")+"}"})}else n.setState({error:"["+e+"]\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u30d8\u30c3\u30c0\u306f\u6b21\u306e\u4e2d\u304b\u3089\u9078\u3076\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002{"+l.join(", ")+"}"})})),c.write(a),c.end()}else n.setState({error:"Something went wrong with FileReader"})},r.readAsArrayBuffer(a)}},{key:"handleChange",value:function(e){var n=e.target,a=n.id,r=n.value,l=Object(t.a)({},this.state.cols);"col_key"===a&&(l.key=r),"col_value"===a&&(l.value=r);var o=y(k,l),c=y(g,l);console.log(l,k,o),this.setState({cols:l,preset1_disabled:o,preset2_disabled:c})}},{key:"handleButtonClick",value:function(e){var t,n=!1,a=!1;"btn_preset1"===e.currentTarget.id?(t=k,n=!0):(t=g,a=!0),this.setState({cols:t,preset1_disabled:n,preset2_disabled:a})}},{key:"render",value:function(){var e,t=this;if(""!==this.state.error)e=i.a.createElement("div",null,i.a.createElement("h2",{className:"error"},"\u30a8\u30e9\u30fc"),i.a.createElement("div",{className:"error"},i.a.createElement("p",null,this.state.error)));else{var n=Array();this.state.rows.forEach((function(e,t){n.push(i.a.createElement("tr",{key:t},i.a.createElement("td",null,t),i.a.createElement("td",null,i.a.createElement("ol",null,e.map((function(e,t){return i.a.createElement("li",{key:t},e)}))))))}));var a=i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,this.state.cols.key),i.a.createElement("th",null,this.state.cols.value)));e=i.a.createElement("div",null,i.a.createElement("h2",null,"\u7d50\u679c"),i.a.createElement("table",{className:"result"},a,i.a.createElement("tbody",null,n)))}return i.a.createElement("div",{className:"container"},i.a.createElement(E,{onDrop:function(e){return t.handleDrop(e)}}),e,i.a.createElement("h2",null,"\u8a2d\u5b9a"),i.a.createElement("details",{className:"dynamic",open:""!==this.state.error},i.a.createElement("summary",{"data-open":"\u9589\u3058\u308b","data-close":"\u958b\u304f"}),i.a.createElement("table",{className:"config"},i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement("label",{htmlFor:"col_key"},"\u30e1\u30fc\u30ea\u30f3\u30b0\u30ea\u30b9\u30c8\u306e\u30d8\u30c3\u30c0")),i.a.createElement("td",null,i.a.createElement("input",{type:"text",id:"col_key",value:this.state.cols.key,onChange:this.handleChange}))),i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement("label",{htmlFor:"col_value"},"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u306e\u30d8\u30c3\u30c0")),i.a.createElement("td",null,i.a.createElement("input",{type:"text",id:"col_value",value:this.state.cols.value,onChange:this.handleChange}))))),i.a.createElement("button",{disabled:this.state.preset1_disabled,id:"btn_preset1",onClick:this.handleButtonClick,title:this.state.preset1_disabled?"":b(k)},"\u30d7\u30ea\u30bb\u30c3\u30c81(\u7d71\u8a08\u78ba\u8a8d)"),i.a.createElement("button",{disabled:this.state.preset2_disabled,id:"btn_preset2",onClick:this.handleButtonClick,title:this.state.preset2_disabled?"":b(g)},"\u30d7\u30ea\u30bb\u30c3\u30c82(ML\u7ba1\u7406)")))}}]),u}(i.a.Component);d.a.render(i.a.createElement(_,null),document.getElementById("root"))}.call(this,n(2).Buffer)},71:function(e,t){},72:function(e,t){},92:function(e,t){},94:function(e,t){}},[[44,1,2]]]);
//# sourceMappingURL=main.1d89b5f1.chunk.js.map